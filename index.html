<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" type="text/css" />
    <title>Laski mapa</title>
  </head>
  <body>
    <main>
      <div id="map-wrapper" class="map-wrapper">
        <img class="map" src="./assets/MAPY/MAPA_BEZ_IKONEK.png" />

        <img src="./assets/IKONKI/1.png" class="icon icon-1 el-1" />
        <img src="./assets/IKONKI/2.png" class="icon icon-2 el-2 no-audio" />
        <img src="./assets/IKONKI/3.png" class="icon icon-3 el-3" />
        <img src="./assets/IKONKI/4.png" class="icon icon-4 el-4" />
        <img src="./assets/IKONKI/5.png" class="icon icon-5 el-5" />
        <img src="./assets/IKONKI/6.png" class="icon icon-6 el-6" />
        <img src="./assets/IKONKI/7.png" class="icon icon-7 el-7" />
        <img src="./assets/IKONKI/8.png" class="icon icon-8 el-8 no-audio" />
        <img src="./assets/IKONKI/9.png" class="icon icon-9 el-9" />
        <img src="./assets/IKONKI/10.png" class="icon icon-10 el-10" />
        <img src="./assets/IKONKI/11.png" class="icon icon-11 el-11" />
        <img src="./assets/IKONKI/12.png" class="icon icon-12 el-12" />
        <img src="./assets/IKONKI/13.png" class="icon icon-13 el-13" />
        <img src="./assets/IKONKI/14.png" class="icon icon-14 el-14" />
        <img src="./assets/IKONKI/15.png" class="icon icon-15 el-15" />
        <img src="./assets/IKONKI/16.png" class="icon icon-16 el-16" />
        <img src="./assets/IKONKI/17.png" class="icon icon-17 el-17" />
        <img src="./assets/IKONKI/18.png" class="icon icon-18 el-18" />
        <img src="./assets/IKONKI/19.png" class="icon icon-19 el-19" />
        <img src="./assets/IKONKI/20.png" class="icon icon-20 el-20" />
        <img
          src="./assets/IKONKI/21_22.png"
          class="icon icon-21 icon-22 el-21 el-22"
        />
        <img src="./assets/IKONKI/23.png" class="icon icon-23 el-23" />
        <img src="./assets/IKONKI/24.png" class="icon icon-24 el-24" />
        <img src="./assets/IKONKI/25.png" class="icon icon-25 el-25" />
        <img src="./assets/IKONKI/26.png" class="icon icon-26 el-26" />
        <img src="./assets/IKONKI/27.png" class="icon icon-27 el-27 no-audio" />
        <img src="./assets/IKONKI/28.png" class="icon icon-28 el-28" />
        <img src="./assets/IKONKI/29.png" class="icon icon-29 el-29" />
        <img src="./assets/IKONKI/30.png" class="icon icon-30 el-30" />
        <img src="./assets/IKONKI/31.png" class="icon icon-31 el-31" />
        <img src="./assets/IKONKI/32.png" class="icon icon-32 el-32 no-audio" />
        <img src="./assets/IKONKI/33.png" class="icon icon-33 el-33 no-audio" />
        <img src="./assets/IKONKI/34.png" class="icon icon-34 el-34" />

        <img src="./assets/CHORAGIEWKI/1.png" class="label label-1 el-1" />
        <img src="./assets/CHORAGIEWKI/2.png" class="label label-2 el-2" />
        <img src="./assets/CHORAGIEWKI/3.png" class="label label-3 el-3" />
        <img src="./assets/CHORAGIEWKI/4.png" class="label label-4 el-4" />
        <img src="./assets/CHORAGIEWKI/5.png" class="label label-5 el-5" />
        <img src="./assets/CHORAGIEWKI/6.png" class="label label-6 el-6" />
        <img src="./assets/CHORAGIEWKI/7.png" class="label label-7 el-7" />
        <img src="./assets/CHORAGIEWKI/8.png" class="label label-8 el-8" />
        <img src="./assets/CHORAGIEWKI/9.png" class="label label-9 el-9" />
        <img src="./assets/CHORAGIEWKI/10.png" class="label label-10 el-10" />
        <img src="./assets/CHORAGIEWKI/11.png" class="label label-11 el-11" />
        <img src="./assets/CHORAGIEWKI/12.png" class="label label-12 el-12" />
        <img src="./assets/CHORAGIEWKI/13.png" class="label label-13 el-13" />
        <img src="./assets/CHORAGIEWKI/14.png" class="label label-14 el-14" />
        <img src="./assets/CHORAGIEWKI/15.png" class="label label-15 el-15" />
        <img src="./assets/CHORAGIEWKI/16.png" class="label label-16 el-16" />
        <img src="./assets/CHORAGIEWKI/17.png" class="label label-17 el-17" />
        <img src="./assets/CHORAGIEWKI/18.png" class="label label-18 el-18" />
        <img src="./assets/CHORAGIEWKI/19.png" class="label label-19 el-19" />
        <img src="./assets/CHORAGIEWKI/20.png" class="label label-20 el-20" />
        <img src="./assets/CHORAGIEWKI/21.png" class="label label-21 el-21" />
        <img src="./assets/CHORAGIEWKI/22.png" class="label label-22 el-22" />
        <img src="./assets/CHORAGIEWKI/23.png" class="label label-23 el-23" />
        <img src="./assets/CHORAGIEWKI/24.png" class="label label-24 el-24" />
        <img src="./assets/CHORAGIEWKI/25.png" class="label label-25 el-25" />
        <img src="./assets/CHORAGIEWKI/26.png" class="label label-26 el-26" />
        <img src="./assets/CHORAGIEWKI/27.png" class="label label-27 el-27" />
        <img src="./assets/CHORAGIEWKI/28.png" class="label label-28 el-28" />
        <img src="./assets/CHORAGIEWKI/29.png" class="label label-29 el-29" />
        <img src="./assets/CHORAGIEWKI/30.png" class="label label-30 el-30" />
        <img src="./assets/CHORAGIEWKI/31.png" class="label label-31 el-31" />
        <img src="./assets/CHORAGIEWKI/32.png" class="label label-32 el-32" />
        <img src="./assets/CHORAGIEWKI/33.png" class="label label-33 el-33" />
        <img src="./assets/CHORAGIEWKI/34.png" class="label label-34 el-34" />
      </div>
      <audio controls class="audio-1">
        <source src="./assets/NAGRANIA/1.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-3">
        <source src="./assets/NAGRANIA/3.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-4">
        <source src="./assets/NAGRANIA/4.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-5">
        <source src="./assets/NAGRANIA/5.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-6">
        <source src="./assets/NAGRANIA/6.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-7">
        <source src="./assets/NAGRANIA/7.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-9">
        <source src="./assets/NAGRANIA/9.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-10">
        <source src="./assets/NAGRANIA/10.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-11">
        <source src="./assets/NAGRANIA/11.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-12">
        <source src="./assets/NAGRANIA/12.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-13">
        <source src="./assets/NAGRANIA/13.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-14">
        <source src="./assets/NAGRANIA/14.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-15">
        <source src="./assets/NAGRANIA/15.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-16">
        <source src="./assets/NAGRANIA/16.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-17">
        <source src="./assets/NAGRANIA/17.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-18">
        <source src="./assets/NAGRANIA/18.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-19">
        <source src="./assets/NAGRANIA/19.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-20">
        <source src="./assets/NAGRANIA/20.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-21">
        <source src="./assets/NAGRANIA/21.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-23">
        <source src="./assets/NAGRANIA/23.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-24">
        <source src="./assets/NAGRANIA/24.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-25">
        <source src="./assets/NAGRANIA/25.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-26">
        <source src="./assets/NAGRANIA/26.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-26-01">
        <source src="./assets/NAGRANIA/26.01.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-28">
        <source src="./assets/NAGRANIA/28.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-29">
        <source src="./assets/NAGRANIA/29.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-30">
        <source src="./assets/NAGRANIA/30.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-31">
        <source src="./assets/NAGRANIA/31.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <audio controls class="audio-34">
        <source src="./assets/NAGRANIA/34.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
    </main>

    <script>
      "use strict";
      alert("wersja testowa");

      let isIOS =
        (/iPad|iPhone|iPod/.test(navigator.platform) ||
          (navigator.platform === "MacIntel" &&
            navigator.maxTouchPoints > 1)) &&
        !window.MSStream;

      let eventType = "click";

      if (isIOS) {
        var container = document.querySelector("main");
        container.addEventListener("touchstart", () => {});
        container.addEventListener("touchend", () => {});
        container.addEventListener("touchcancel", () => {});
        container.addEventListener("touchmove", () => {});
        container.addEventListener("click", () => {});

        eventType = "touchend";
      } else {
        document.querySelector(".map").addEventListener("click", function () {
          hideElements();
        });
        document.querySelector("main").addEventListener(
          "click",
          function () {
            hideElements();
          },
          true
        );
      }

      var iconsAndLabels = document.querySelectorAll(".icon, .label");
      var activeElements = [];

      for (var i = 0; i < iconsAndLabels.length; i++) {
        iconsAndLabels[i].addEventListener(eventType, function (event) {
          hideElements();

          var elementNumber = RegExp(/\d+\.png$/)
            .exec(event.target.src)[0]
            .slice(0, -4);
          if (elementNumber === "22") elementNumber = "21";

          var audioElement = document.querySelector(".audio-" + elementNumber);
          var isLabel = event.target.className.indexOf("label") >= 0;
          var labelElement = isLabel
            ? event.target
            : document.querySelector(".label-" + elementNumber);

          showElement(labelElement);

          if (audioElement) {
            showElement(audioElement);
            audioElement.play();

            // leśniczówka has 2 recordings, show both
            if (elementNumber === "26") {
              var secondAudioElement = document.querySelector(".audio-26-01");
              showElement(secondAudioElement);
            }
          }
        });
      }

      function hideElements() {
        activeElements.forEach(function (el) {
          if (el.className.includes(" show"))
            el.className = el.className.slice(0, -5);

          if (typeof el.pause === "function") el.pause();
        });
        activeElements = [];
      }

      function showElement(el) {
        activeElements.push(el);
        el.className = el.className + " show";
      }
    </script>
  </body>
</html>
